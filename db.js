const sqlite3 = require('sqlite3')
const db = new sqlite3.Database('car_search.db')

//USERS TABLE
const create_users_table = `CREATE TABLE IF NOT EXISTS USERS
(ID INTEGER PRIMARY KEY AUTOINCREMENT, 
NAME TEXT NOT NULL, 
EMAIL TEXT UNIQUE NOT NULL, 
PASSWORD TEXT NOT NULL, 
USER_ROLE TEXT NOT NULL, 
ISADMIN INT)`

//USED CARS
// const create_used_cars_table=`CREATE TABLE IF NOT EXISTS USEDCARS 
// (ID INTEGER PRIMARY KEY AUTOINCREMENT, BRAND TEXT NOT NULL, MODEL TEXT NOT NULL, 
// PRICE INT NOT NULL, KM INTEGER NOT NULL, EMAIL TEXT UNIQUE NOT NULL, USER_ID INTEGER )`

//NEW CARS
const create_cars_table = `CREATE TABLE IF NOT EXISTS CARS 
(ID INTEGER PRIMARY KEY AUTOINCREMENT,
BRAND TEXT NOT NULL, 
MODEL TEXT NOT NULL, 
PRICE INT NOT NULL, 
KM INTEGER NOT NULL,  
EMAIL TEXT UNIQUE NOT NULL, 
USER_ID INTEGER,
FOREIGN KEY (USER_ID) REFERENCES USERS (ID))`
//{KM && EMAIL MMKN YTSABO EMPTY}

//USERS TO NEW CAR
const create_user_booking_table = `CREATE TABLE IF NOT EXISTS BOOKING
(ID INTEGER PRIMARY KEY AUTOINCREMENT, 
DATE TEXT NOT NULL, 
USER_ID INT, 
CARS_ID INT,
FOREIGN KEY (USER_ID) REFERENCES USERS (ID), 
FOREIGN KEY (CAR_ID) REFERENCES CARS (ID)))`
//{REMOVE DATE? TO QUANTITY}


//FEEDBACKS
const create_feedback_table = `CREATE TABLE IF NOT EXISTS REVIEWS
(ID INTEGER PRIMARY KEY AUTOINCREMENT, 
USER_ID INTEGER, 
REVIEW TEXT NOT NULL,
FOREIGN KEY (USER_ID) REFERENCES USERS (ID))`


// exports data of db, and tables all alone
module.exports = { db, create_users_table, create_cars_table, create_user_booking_table, create_feedback_table }